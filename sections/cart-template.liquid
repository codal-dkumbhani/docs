<div class="page-width cart-page">
  <div class="container">
    {%- render 'breadcrumbs' -%}

    {%- if true -%}
      <form
        action="{{ routes.cart_url }}"
        method="post"
        novalidate
        data-location="page"
        id="CartPageForm"
      >
        <div class="cart__page">
          <div class="cart__page-col flex-fill cart-left">
            {% assign item_row_count = 0 %}
            {% for item in cart.items %}
              {% capture item_row_count %}{{ item_row_count | plus:1 }}{% endcapture %}
            {% endfor %}

            <div
              data-product-count="{{item_row_count}}"
              class="cart-summary-top cart-summary d-md-none position-fixed cart-summary-top-stickey"
              {% if item_row_count > '3' %}
                style="display:none !important"
              {% endif %}
            >
              {% if settings.cart_notes_enable %}
                <div>
                  <label for="CartNote">{{ 'cart.general.note' | t }}</label>
                  <textarea
                    name="note"
                    class="input-full cart-notes"
                    id="CartNote"
                  >{{ cart.note }}</textarea>
                </div>
              {% endif %}

              <div class="order-sum-table">
                <div class="order-sum-tfoot">
                  <div class="order-sum-tr d-flex align-items-center justify-content-between cart__item-sub cart__item-row m-0">
                    <span>{{ 'cart.general.subtotal' | t }}</span>
                    <span id="subtotal1" data-subtotal>{{ cart.total_price | money }}</span>
                  </div>
                </div>
              </div>

              {% if settings.cart_terms_conditions_enable %}
                <div class="cart__item-row cart__terms">
                  <input type="checkbox" id="CartTerms" class="cart__terms-checkbox">
                  <label for="CartTerms">
                    {% if settings.cart_terms_conditions_link != blank %}
                      {{ 'cart.general.terms_html' | t: url: settings.cart_terms_conditions_link }}
                    {% else %}
                      {{ 'cart.general.terms' | t }}
                    {% endif %}
                  </label>
                </div>
              {% endif %}

              <div class="cart__item-row cart__checkout-wrapper">
                <button
                  type="submit"
                  class="btn btn--full checkout-button-cart"
                  {% if cart.items.size == 0 %}
                    disabled="disabled"
                  {% endif %}
                  name="checkout"
                  data-terms-required="{{ settings.cart_terms_conditions_enable }}"
                  class="btn cart__checkout"
                >
                  {{ 'cart.general.cartcheckoutbtn' | t }}
                </button>

                {% if additional_checkout_buttons and settings.cart_additional_buttons %}
                  <div class="additional-checkout-buttons">
                    {{ content_for_additional_checkout_buttons }}
                  </div>
                {% endif %}
              </div>
            </div>

            <header class="d-none d-md-block section-header text-left{% if cart.item_count == 0 %} section-header-empty-cart{% endif %}">
              <h1>{{ 'cart.general.titlecustom' | t }}</h1>
            </header>

            <div>
              {% for item in cart.items %}
                {%- render 'cart-item',
                  location: 'page',
                  product: item,
                  small: false,
                  removeBtn: true,
                  forloop: forloop
                -%}
              {% endfor %}
              {% if cart.item_count == 0 %}
                <div class="empty-cart--block test">
                  <img
                    width="auto"
                    height="auto"
                    src="{{ 'empty-cart.svg' | asset_url }}"
                    alt="empty-cart"
                  >
                  <span>Your Cart is Empty</span>
                </div>
              {% else %}
                <div class="empty-cart--block ajaxhide">
                  <img
                    width="auto"
                    height="auto"
                    src="{{ 'empty-cart.svg' | asset_url }}"
                    alt="empty-cart"
                  >
                  <span>Your Cart is Empty</span>
                </div>
              {% endif %}
            </div>

            {% render 'cartcommontext' %}
          </div>

          <div class="cart__page-col cart-right-section">
            <div class="cart-summary">
              {% if settings.cart_notes_enable %}
                <div>
                  <label for="CartNote">{{ 'cart.general.note' | t }}</label>
                  <textarea
                    name="note"
                    class="input-full cart-notes"
                    id="CartNote"
                  >{{ cart.note }}</textarea>
                </div>
              {% endif %}

              <h2 class="d-none d-md-block">ORDER SUMMARY</h2>
              <div class="order-sum-table">
                <div class="order-sum-tbody">
                  <div class="order-sum-tr d-flex align-items-center justify-content-between">
                    <span>{{ 'cart.general.freeshipping' | t }}</span>
                    {% if cart.total_price > 5000 %}
                      <span class="shippingtextchange">
                        {{- 'cart.general.freeshipping_free' | t -}}
                      </span>
                    {% else %}
                      <span class="shippingtextchange">
                        {{- 'cart.general.freeshippingfree' | t -}}
                      </span>
                    {% endif %}
                  </div>
                  <div data-discounts>
                    {% if cart.cart_level_discount_applications != blank %}
                      <div class="order-sum-tr d-flex align-items-center justify-content-between cart__discounts cart__item-sub cart__item-row">
                        <span>{{ 'cart.general.discounts' | t }}</span>
                        <span>
                          {% for cart_discount in cart.cart_level_discount_applications %}
                            <div class="cart__discount">
                              {{ cart_discount.title }} (-
                              {{- cart_discount.total_allocated_amount | money -}}
                              )
                            </div>
                          {% endfor %}
                        </span>
                      </div>
                    {% endif %}
                  </div>
                </div>
                <div class="order-sum-tfoot">
                  <div class="order-sum-tr d-flex align-items-center justify-content-between cart__item-sub cart__item-row m-0">
                    <span>{{ 'cart.general.subtotal' | t }}</span>
                    <span class="sub-total-value" id="subtotal2" data-subtotal>
                      {{- cart.total_price | money -}}
                    </span>
                  </div>
                </div>
              </div>

              {% if settings.cart_terms_conditions_enable %}
                <div class="cart__item-row cart__terms">
                  <input type="checkbox" id="CartTerms" class="cart__terms-checkbox">
                  <label for="CartTerms">
                    {% if settings.cart_terms_conditions_link != blank %}
                      {{ 'cart.general.terms_html' | t: url: settings.cart_terms_conditions_link }}
                    {% else %}
                      {{ 'cart.general.terms' | t }}
                    {% endif %}
                  </label>
                </div>
              {% endif %}

              <div class="cart__item-row text-center">
                <p class="order-note m-0">{{ 'cart.general.shipping_at_checkout' | t }}</p>
                <p class="order-note mt-2">
                  By clicking Checkout Now, you confirm agreement to the
                  <a href="{{ shop.url }}/pages/website-terms-of-use">Terms of Use</a> and included
                  <a href="{{ shop.url}}/pages/privacy-policy">Privacy Policy.</a>
                </p>
              </div>

              <div class="cart__item-row cart__checkout-wrapper">
                <button
                  type="submit"
                  class="btn btn--full checkout-button-cart"
                  {% if cart.item_count == 0 %}
                    disabled="disabled"
                  {% endif %}
                  name="checkout"
                  data-terms-required="{{ settings.cart_terms_conditions_enable }}"
                  class="btn cart__checkout"
                >
                  {{ 'cart.general.cartcheckoutbtn' | t }}
                </button>

                {% if additional_checkout_buttons and settings.cart_additional_buttons %}
                  <div class="additional-checkout-buttons">
                    {{ content_for_additional_checkout_buttons }}
                  </div>
                {% endif %}
              </div>

              <div class="checkout-section d-none d-md-block">
                <p class="text-center">{{ 'cart.general.belowbuttontext' | t }}</p>
                <ul>
                  <li>
                    <img
                      width="auto"
                      height="auto"
                      src="{{ 'pay.png' | asset_url }}"
                      alt="shop pay"
                    >
                  </li>
                  <li>
                    <img
                      width="auto"
                      height="auto"
                      src="{{ 'Apple_Pay.svg' | asset_url }}"
                      alt="apple pay"
                    >
                  </li>
                  <li>
                    <img
                      width="auto"
                      height="auto"
                      src="{{ 'GPay.png' | asset_url }}"
                      alt="google pay"
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </form>
    {%- endif -%}
  </div>
</div>

{% schema %}
{
  "name": "Cart Features",
  "blocks": [
    {
      "type": "bottomcommon",
      "name": "Cart Features",
      "limit": 3,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Content"
        }
      ]
    }
  ],
  "default": {
    "settings": {}
  }
}
{% endschema %}

<script
  src="{{ 'cart-template.js' | asset_url }}"
  defer="defer"
></script>
