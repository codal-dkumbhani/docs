{{ 'header.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign main_menu = linklists[section.settings.main_menu_link_list]
  assign toolbar_menu = linklists[section.settings.toolbar_menu]

  assign logo_alignment = 'left'
  if section.settings.main_menu_alignment == 'center-left' or section.settings.main_menu_alignment == 'center-split' or section.settings.main_menu_alignment == 'center' or section.settings.main_menu_alignment == 'center-drawer'
    assign logo_alignment = 'center'
  endif

  assign dropdown_alignment = 'left'
  if section.settings.main_menu_alignment == 'left-center' or section.settings.main_menu_alignment == 'center-split' or section.settings.main_menu_alignment == 'center'
    assign dropdown_alignment = 'center'
  endif

  assign template_name = template | replace: '.', ' ' | truncatewords: 2, '' | handle

  assign sticky_header = false
  if section.settings.header_style == 'sticky'
    assign sticky_header = true
  endif
  assign overlay_header = false
  if template_name == 'index' and section.settings.sticky_index
    assign overlay_header = true
  endif
  if template_name contains 'collection' and collection.image and section.settings.sticky_collection
    assign overlay_header = true
  endif
-%}

{%- render 'drawer-menu',
  section: section,
  main_menu: main_menu,
  toolbar_menu: toolbar_menu,
  logo_alignment: logo_alignment
-%}
{%- render 'cart-drawer' -%}

<style>
  .site-nav__link,
  .site-nav__dropdown-link:not(.site-nav__dropdown-link--top-level) {
    font-size: {{ settings.type_navigation_size }}px;
  }
  .header-{{ section.id }} .bg-gold{
    background-color:{{ section.settings.header_main_bg-color}};
  }
  .header-{{ section.id }} .banner-text{
    font-size:{{ section.settings.header_text_size}}px;
  }
  .header-{{ section.id }} .top-announcement-bar a{
    color:{{ section.settings.header_text_color}};
  }
  .header-{{ section.id }} .header-sticky-wrapper{
    background-color :{{ section.settings.header_bg_color}};
  }

  @media screen and (max-width: 767px){
    .banner-text{
      font-size:{{ section.settings.header_text_size_mobile}}px;
    }
  }
  {% if settings.type_navigation_capitalize %}
    .site-nav__link, .mobile-nav__link--top-level {
      text-transform: uppercase;
      letter-spacing: normal;
    }
    .mobile-nav__link--top-level {
      font-size: var(--thermos-font-size-18);
    }
  {% endif %}

  {% if mainmenu.length > 6 %}
    .site-nav__link {
      padding-left: 10px;
      padding-right: 10px;
    }
  {% endif %}

  {% unless section.settings.mega_menu_images %}
    .megamenu__collection-image {
      display: none;
    }
  {% endunless %}

  {%- if settings.color_header == settings.color_body_bg or settings.color_body_bg contains settings.color_header -%}
    .site-header {
      box-shadow: 0 0 1px var(--thermos-dark-gray-20);
    }

    .toolbar + .header-sticky-wrapper .site-header {
      border-top: 0;
    }
  {%- endif -%}
</style>

<div
  data-section-id="{{ section.id }}"
  data-section-type="header"
  class="sticky-header header-{{ section.id }}"
>
  {%- unless overlay_header -%}
    {%- if section.settings.show_locale_selector
      or section.settings.show_currency_selector
      or section.settings.toolbar_social
      or section.settings.toolbar_menu != blank
    -%}
      {%- render 'toolbar',
        section: section,
        toolbar_menu: toolbar_menu,
        overlay_header: overlay_header
      -%}
    {%- endif -%}
  {%- endunless -%}

  <div class="header-sticky-wrapper">
    {% if section.settings.header_main_text != '' %}
      <div class="w-100 bg-gold header-top-strip">
        <div class="page-width">
          <div class="d-md-flex align-items-center justify-content-between">
            <div class="banner-text m-0 top-announcement-bar text-white text-center ">
              {{ section.settings.header_main_text }}
            </div>
          </div>
        </div>
      </div>
    {% endif %}
    <div
      id="HeaderWrapper"
      class="header-wrapper{% if overlay_header %} header-wrapper--sticky is-light{% endif %}"
    >
      {%- if overlay_header -%}
        {%- if section.settings.show_locale_selector
          or section.settings.show_currency_selector
          or section.settings.toolbar_social
          or section.settings.toolbar_menu != blank
        -%}
          {%- render 'toolbar',
            section: section,
            toolbar_menu: toolbar_menu,
            overlay_header: overlay_header
          -%}
        {%- endif -%}
      {%- endif -%}
      <header
        id="SiteHeader"
        class="site-header{% if settings.type_navigation_style == 'heading' %} site-header--heading-style{% endif %}"
        data-sticky="{{ sticky_header }}"
        data-overlay="{{ overlay_header }}"
      >
        <div class="page-width">
          <div
            class="header-layout header-layout--{{ section.settings.main_menu_alignment }}"
            data-logo-align="{{ logo_alignment }}"
          >
            {%- if logo_alignment == 'left' -%}
              <div class="header-item header-item--logo small--hide">
                {%- render 'header-logo-block', section: section -%}
              </div>
            {%- endif -%}

            {%- if logo_alignment == 'left'
              and section.settings.main_menu_alignment != 'left-drawer'
            -%}
              <div
                class="small--hide header-item header-item--navigation{% if section.settings.main_menu_alignment == 'left-center' %} text-center{% endif %}"
                {% unless disable_aria %}
                  role="navigation" aria-label="Primary"
                {% endunless %}
              >
                {%- render 'header-desktop-nav',
                  main_menu: main_menu,
                  dropdown_alignment: dropdown_alignment,
                  hover_menu: section.settings.hover_menu,
                  block: block
                -%}
              </div>
            {%- endif -%}

            {%- if logo_alignment == 'left' -%}
              <div class="header-item header-item--left header-item--navigation">
                {%- if section.settings.main_menu_alignment == 'center'
                  or section.settings.main_menu_alignment == 'center-split'
                -%}
                  {%- if settings.search_enable -%}
                    <div class="site-nav small--hide">
                      <a
                        href="{{ routes.search_url }}"
                        class="site-nav__link site-nav__link--icon js-search-header"
                      >
                        {% render 'thermos-icon-hamburger' %}
                        <span class="icon__fallback-text">{{ 'general.search.title' | t }}</span>
                      </a>
                    </div>
                  {%- endif -%}
                {%- endif -%}

                {%- if section.settings.main_menu_alignment == 'center-left' -%}
                  {%- render 'header-desktop-nav',
                    main_menu: main_menu,
                    dropdown_alignment: dropdown_alignment
                  -%}
                {%- endif -%}

                <div class="site-nav{% unless section.settings.main_menu_alignment == 'center-drawer' %} medium-up--hide{% endunless %}">
                  <button
                    type="button"
                    class="site-nav__link site-nav__link--icon js-drawer-open-nav"
                    aria-controls="NavDrawer"
                    aria-expanded="false"
                  >
                    {% render 'thermos-icon-hamburger' %}
                    <span class="icon__fallback-text">
                      {{- 'general.drawers.navigation' | t -}}
                    </span>
                  </button>
                </div>
              </div>

              {%- if section.settings.main_menu_alignment == 'center-split' -%}
                {%- render 'header-split-nav',
                  main_menu: main_menu,
                  section: section,
                  dropdown_alignment: dropdown_alignment
                -%}
              {%- endif -%}

              {%- if section.settings.main_menu_alignment != 'center-split' -%}
                <div class="header-item header-item--logo medium-up--hide">
                  {%- render 'header-logo-block', section: section -%}
                </div>
              {%- endif -%}
            {%- endif -%}

            <div class="header-item header-item--icons">
              {%- render 'header-icons', section: section -%}
            </div>
          </div>

          {%- if section.settings.main_menu_alignment == 'center' -%}
            <div class="text-center">
              {%- render 'header-desktop-nav',
                main_menu: main_menu,
                dropdown_alignment: dropdown_alignment,
                hover_menu: section.settings.hover_menu
              -%}
            </div>
          {%- endif -%}
        </div>
      </header>
    </div>
    <div class="new-search-bar" style="display:none;">
      <div class="page-width">
        <div class="searchbar-inner">
          <form
            action="{{ routes.search_url }}"
            method="get"
            role="search"
            id="HeaderSearchForm"
            class="site-header__search-form"
          >
            <input type="hidden" name="type" value="{{ settings.search_type }}">
            <button
              type="submit"
              class="text-link site-header__search-btn site-header__search-btn--submit"
            >
              {% render 'thermos-icon-search' %}
              <span class="icon__fallback-text">{{ 'general.search.submit' | t }}</span>
            </button>
            <input
              type="search"
              name="q"
              value="{{ search.terms | escape | replace: '*', '' }}"
              placeholder="{{ 'general.search.placeholder' | t }}"
              class="site-header__search-input"
              aria-label="{{ 'general.search.placeholder' | t }}"
            >
          </form>
          <button
            type="button"
            onclick="searchdivtoggle()"
            id="SearchClose"
            class="js-search-header-close text-link site-header__search-btn"
          >
            {% render 'thermos-icon-close' %}
            <span class="icon__fallback-text">
              {{- 'general.accessibility.close_modal' | t | json -}}
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<script
  src="{{ 'header.js' | asset_url }}"
  defer="defer"
></script>

{% schema %}
{
  "name": "t:sections.header.name",
  "settings": [
    {
      "type": "richtext",
      "id": "header_main_text",
      "label": "Announcement Bar Text"
    },
    {
      "type": "color",
      "id": "header_main_bg-color",
      "label": "Header Background"
    },
    {
      "type": "color",
      "id": "header_text_color",
      "label": "Announcement Bar Text Color"
    },
    {
      "type": "color",
      "id": "header_bg_color",
      "label": "Header background Color"
    },
    {
      "type": "range",
      "id": "header_text_size",
      "label": "Header Text Font Size",
      "default": 18,
      "min": 10,
      "max": 26,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "header_text_size_mobile",
      "label": "Header Text Font Size Mobile",
      "default": 16,
      "min": 8,
      "max": 24,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "link_list",
      "id": "main_menu_link_list",
      "label": "t:sections.header.settings.main_menu_link_list.label",
      "default": "main-menu"
    },
    {
      "type": "checkbox",
      "id": "hover_menu",
      "label": "t:sections.header.settings.hover_menu.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "mega_menu_images",
      "label": "t:sections.header.settings.mega_menu_images.label",
      "default": true,
      "info": "t:sections.header.settings.mega_menu_images.info"
    },
    {
      "type": "select",
      "id": "main_menu_alignment",
      "label": "t:sections.header.settings.main_menu_alignment.label",
      "default": "left",
      "options": [
        {
          "value": "left",
          "label": "t:sections.header.settings.main_menu_alignment.options.left.label"
        },
        {
          "value": "left-center",
          "label": "t:sections.header.settings.main_menu_alignment.options.left-center.label"
        },
        {
          "value": "left-drawer",
          "label": "t:sections.header.settings.main_menu_alignment.options.left-drawer.label"
        },
        {
          "value": "center-left",
          "label": "t:sections.header.settings.main_menu_alignment.options.center-left.label"
        },
        {
          "value": "center-split",
          "label": "t:sections.header.settings.main_menu_alignment.options.center-split.label"
        },
        {
          "value": "center",
          "label": "t:sections.header.settings.main_menu_alignment.options.center.label"
        },
        {
          "value": "center-drawer",
          "label": "t:sections.header.settings.main_menu_alignment.options.center-drawer.label"
        }
      ]
    },
    {
      "type": "select",
      "id": "header_style",
      "label": "t:sections.header.settings.header_style.label",
      "default": "normal",
      "options": [
        {
          "value": "normal",
          "label": "t:sections.header.settings.header_style.options.normal.label"
        },
        {
          "value": "sticky",
          "label": "t:sections.header.settings.header_style.options.sticky.label"
        }
      ]
    },
    {
      "type": "checkbox",
      "id": "sticky_index",
      "label": "t:sections.header.settings.sticky_index.label",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "sticky_collection",
      "label": "t:sections.header.settings.sticky_collection.label",
      "info": "t:sections.header.settings.sticky_collection.info",
      "default": false
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header_toolbar"
    },
    {
      "type": "link_list",
      "id": "toolbar_menu",
      "label": "t:sections.header.settings.toolbar_menu.label",
      "info": "t:sections.header.settings.toolbar_menu.info"
    },
    {
      "type": "checkbox",
      "id": "toolbar_social",
      "label": "t:sections.header.settings.toolbar_social.label"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header_language_selector",
      "info": "t:sections.header.settings.header_language_selector"
    },
    {
      "type": "checkbox",
      "id": "show_locale_selector",
      "label": "t:sections.header.settings.show_locale_selector.label",
      "default": true
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header_currency_selector",
      "info": "t:sections.header.settings.header_currency_selector"
    },
    {
      "type": "checkbox",
      "id": "show_currency_selector",
      "label": "t:sections.header.settings.show_currency_selector.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_currency_flags",
      "label": "t:sections.header.settings.show_currency_flags.label",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "t:sections.header.blocks.logo.name",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "t:sections.header.blocks.logo.settings.logo.label"
        },
        {
          "type": "image_picker",
          "id": "logo-inverted",
          "label": "t:sections.header.blocks.logo.settings.logo-inverted.label",
          "info": "t:sections.header.blocks.logo.settings.logo-inverted.info"
        },
        {
          "type": "range",
          "id": "desktop_logo_width",
          "label": "t:sections.header.blocks.logo.settings.desktop_logo_width.label",
          "default": 200,
          "min": 100,
          "max": 400,
          "step": 10,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "mobile_logo_width",
          "label": "t:sections.header.blocks.logo.settings.mobile_logo_width.label",
          "default": 140,
          "min": 60,
          "max": 200,
          "step": 10,
          "unit": "px",
          "info": "t:sections.header.blocks.logo.settings.mobile_logo_width.info"
        }
      ]
    },
    {
      "type": "megamenu",
      "name": "megamenu-content-block",
      "limit": 7,
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Nav name"
        },
        {
          "type": "image_picker",
          "id": "image1",
          "label": "Image 1"
        },
        {
          "type": "url",
          "id": "image1url",
          "label": "Image 1 URL"
        },
        {
          "type": "image_picker",
          "id": "image2",
          "label": "Image 2"
        },
        {
          "type": "url",
          "id": "image2url",
          "label": "Image 2 URL"
        },
        {
          "type": "image_picker",
          "id": "image3",
          "label": "Image 3"
        },
        {
          "type": "url",
          "id": "image3url",
          "label": "Image 3 URL"
        },
        {
          "type": "image_picker",
          "id": "image4",
          "label": "Image 4",
          "info": "This is the content block"
        },
        {
          "type": "text",
          "id": "image4Text",
          "label": "Image 4 Text",
          "info": "This is the content block Text"
        },
        {
          "type": "text",
          "id": "image4SubText",
          "label": "Image 4 Sub Text",
          "info": "This is the content block Sub Text"
        },
        {
          "type": "url",
          "id": "image4TextURL",
          "label": "Image 4 Text URL",
          "info": "This is the content block URL"
        }
      ]
    },
    {
      "type": "megamenu_collection",
      "name": "megamenu-collection-block",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Nav Name"
        },
        {
          "type": "image_picker",
          "id": "nav-collection-img1",
          "label": "Nav Collection image 1"
        },
        {
          "type": "text",
          "id": "nav-collection-text1",
          "label": "Nav Collection Text 1"
        },
        {
          "type": "url",
          "id": "nav-collection-url1",
          "label": "Nav Collection URL 1"
        },
        {
          "type": "image_picker",
          "id": "nav-collection-img2",
          "label": "Nav Collection image 2"
        },
        {
          "type": "text",
          "id": "nav-collection-text2",
          "label": "Nav Collection Text 2"
        },
        {
          "type": "url",
          "id": "nav-collection-url2",
          "label": "Nav Collection URL 2"
        },
        {
          "type": "image_picker",
          "id": "nav-collection-img3",
          "label": "Nav Collection image 3"
        },
        {
          "type": "text",
          "id": "nav-collection-text3",
          "label": "Nav Collection Text 3"
        },
        {
          "type": "url",
          "id": "nav-collection-url3",
          "label": "Nav Collection URL 3"
        },
        {
          "type": "image_picker",
          "id": "nav-collection-img4",
          "label": "Nav Collection image 4"
        },
        {
          "type": "text",
          "id": "nav-collection-text4",
          "label": "Nav Collection Text 4"
        },
        {
          "type": "url",
          "id": "nav-collection-url4",
          "label": "Nav Collection URL 4"
        }
      ]
    }
  ],
  "default": {
    "settings": {}
  },
  "disabled_on": {
    "groups": ["footer", "custom.popups"]
  }
}
{% endschema %}
