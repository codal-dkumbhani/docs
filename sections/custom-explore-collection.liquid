{{ 'custom-explore-collection.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign display_map = false
  assign onboarding = false
  assign explore_product_handle = section.settings.designated_collection

  assign bg_image = section.settings.background_image | image_url: width: 1800

  assign display_map = true

  assign section_title = section.settings.section_title
-%}

{% if template == 'product' %}
  {% for collection in product.collections %}
    {% if collection.metafields.promobanner.image != blank %}
      {% assign bg_image = collection.metafields.promobanner.image %}
      {% assign section_title = collection.metafields.promobanner.heading %}
    {% endif %}
  {% endfor %}
{% endif %}

{% if bg_image != blank %}
  {%- style -%}
    .map-section--{{ section.id }} {
      background-size: 100%;
      background-repeat: no-repeat;
      background-position: center;
      background-image: url("{{ bg_image  }}");
      background-position: {{ section.settings.background_image_position | default: 'initial' }};
      transition: all 500ms ease;
    }

    @media only screen and (max-width: 600px) {
      .map-section--{{ section.id }} {
        background-size: cover !important;
      }
    }

    .map-section--{{ section.id }}:hover {
      background-size: 108%;
    }

    @media only screen and (max-width: 600px) {
      .map-section--{{ section.id }} {
        height: 548px !important;
      }

      .explore-collection-content--{{ section.id }}{
        position: absolute;
        top: 126px !important;
        text-align: left;
        left:  2%;
      }
    }
  {%- endstyle -%}
{% endif %}

<div class="map-section map-section--{{ section.id }}" data-section-id="{{ section.id }}">
  {%- if section.settings.section_title != blank
    or section.settings.designated_collection != blank
  -%}
    <div
      style="background-color: var(--thermos-dark-gray-27)"
      class="h-100 w-100 map-section-space"
    >
      <div class="page-width">
        <div class="container-fluid">
          <div
            class="explore-title-wrapper"
            style="position: relative"
          >
            <div class="explore-collection-content explore-collection-content--{{ section.id }}">
              <h1 class=" text-white mb-5 header-{{ section.id }}">
                {{ section_title }}
              </h1>
              {% if section.settings.section_url != empty %}
                <a
                  href="{{ section.settings.section_url  }}"
                  class="mt-4 btn-secondary btn-secondary--{{ section.id }}"
                >
                  Explore Collection
                </a>
              {% endif %}
            </div>
          </div>
          <div class="col-12 col-lg-auto ml-auto d-none d-lg-block product-block">
            <!-- <br class="small--hide"> -->
            {%- assign product = all_products[section.settings.designated_product] -%}

            {%- render 'product-grid-item-3',
              product: product,
              grid_item_width: grid_item_width,
              per_row: per_row
            -%}
          </div>
        </div>
      </div>
    </div>
  {%- endif -%}
</div>

{%- style -%}
  .header-{{ section.id }} {
      color: var(--thermos-white);
      font-family: var(--thermos-dinot-cond-bold);;
      font-size: var(--thermos-font-size-58);
      font-weight: var(--thermos-font-Weight-700);
      font-style: normal;
      letter-spacing: normal;
      line-height: var(--thermos-line-height-58);
      text-align: left;
      text-transform: uppercase;
    }
    .header-{{ section.id }} > p {
      margin-bottom: 0px;
    }
    @media only screen and (max-width: 600px) {
      .header-{{ section.id }} > p {
        margin-bottom: 0px;
        font-size: var(--thermos-font-size-40);
        line-height: var(--thermos-line-height-45);
        font-weight: normal;
      }
    }
{%- endstyle -%}

{% schema %}
{
  "name": "Custom Explorer w/ Card",
  "class": "index-section--flush",
  "settings": [
    {
      "type": "product",
      "id": "designated_product",
      "label": "Special Product",
      "info": "Collection that holds this  product"
    },
    {
      "id": "section_title",
      "type": "richtext",
      "label": "Title Text",
      "default": "<p>DESIGNED FOR KIDS AND THEIR PARENTS </p>"
    },
    {
      "type": "url",
      "id": "section_url",
      "label": "Button Link"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Image",
      "info": "Use instead of an API key"
    },
    {
      "type": "select",
      "id": "background_image_position",
      "label": "Image focal point",
      "default": "center center",
      "options": [
        {
          "label": "Top left",
          "value": "top left"
        },
        {
          "label": "Top center",
          "value": "top center"
        },
        {
          "label": "Top right",
          "value": "top right"
        },
        {
          "label": "Middle left",
          "value": "center left"
        },
        {
          "label": "Middle center",
          "value": "center center"
        },
        {
          "label": "Middle right",
          "value": "center right"
        },
        {
          "label": "Bottom left",
          "value": "bottom left"
        },
        {
          "label": "Bottom center",
          "value": "bottom center"
        },
        {
          "label": "Bottom right",
          "value": "bottom right"
        }
      ],
      "info": "Used to keep the subject of your photo in view."
    }
  ],
  "presets": [
    {
      "name": "Explore -- Collection",
      "category": "Collection"
    }
  ]
}
{% endschema %}
